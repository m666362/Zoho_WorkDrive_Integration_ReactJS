{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useState, useEffect } from \"react\";\nexport const useTableSearch = _ref => {\n  _s();\n\n  let {\n    searchVal,\n    retrieve\n  } = _ref;\n  const [filteredData, setFilteredData] = useState([]);\n  const [origData, setOrigData] = useState([]);\n  const [searchIndex, setSearchIndex] = useState([]);\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    setLoading(true);\n\n    const crawl = (data, allValues) => {\n      if (!allValues) allValues = [];\n\n      for (var key in data) {\n        if (typeof data[key] === \"object\") {\n          crawl(data[key], allValues);\n        } // else if (typeof data[key] === \"array\") {\n        //   data[key].map((d, i)=>{\n        //     crawl(i, allValues)\n        //   })\n        // }\n        else if (key == \"name\") {\n          allValues.push(data[key] + \" \");\n        }\n      }\n\n      return allValues;\n    };\n\n    const fetchData = async () => {\n      setOrigData(retrieve);\n      setFilteredData(retrieve);\n      const searchInd = retrieve.map(item => {\n        const allValues = crawl(item);\n        return {\n          allValues: allValues.toString()\n        };\n      });\n      setSearchIndex(searchInd);\n      if (retrieve) setLoading(false);\n    };\n\n    fetchData();\n  }, [retrieve]);\n  useEffect(() => {\n    if (searchVal) {\n      const reqData = searchIndex.map((data, index) => {\n        if (data.allValues.toLowerCase().indexOf(searchVal.toLowerCase()) >= 0) return origData[index];\n        return null;\n      });\n      setFilteredData(reqData.filter(data => {\n        if (data) return true;\n        return false;\n      }));\n    } else setFilteredData(origData);\n  }, [searchVal, origData, searchIndex]);\n  return {\n    filteredData,\n    loading\n  };\n};\n\n_s(useTableSearch, \"XI07xObxu7AEENAc+GVbS9bW4qc=\");","map":{"version":3,"sources":["D:/Rayhan/Unique Project/zoho_api_axios(1)/src/components/WorkDrive/UseTableSearch.js"],"names":["useState","useEffect","useTableSearch","searchVal","retrieve","filteredData","setFilteredData","origData","setOrigData","searchIndex","setSearchIndex","loading","setLoading","crawl","data","allValues","key","push","fetchData","searchInd","map","item","toString","reqData","index","toLowerCase","indexOf","filter"],"mappings":";;AAAA,SAASA,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AAEA,OAAO,MAAMC,cAAc,GAAG,QAA6B;AAAA;;AAAA,MAA5B;AAAEC,IAAAA,SAAF;AAAaC,IAAAA;AAAb,GAA4B;AACzD,QAAM,CAACC,YAAD,EAAeC,eAAf,IAAkCN,QAAQ,CAAC,EAAD,CAAhD;AACA,QAAM,CAACO,QAAD,EAAWC,WAAX,IAA0BR,QAAQ,CAAC,EAAD,CAAxC;AACA,QAAM,CAACS,WAAD,EAAcC,cAAd,IAAgCV,QAAQ,CAAC,EAAD,CAA9C;AACA,QAAM,CAACW,OAAD,EAAUC,UAAV,IAAwBZ,QAAQ,CAAC,IAAD,CAAtC;AAEAC,EAAAA,SAAS,CAAC,MAAM;AACdW,IAAAA,UAAU,CAAC,IAAD,CAAV;;AACA,UAAMC,KAAK,GAAG,CAACC,IAAD,EAAOC,SAAP,KAAqB;AACjC,UAAI,CAACA,SAAL,EAAgBA,SAAS,GAAG,EAAZ;;AAChB,WAAK,IAAIC,GAAT,IAAgBF,IAAhB,EAAsB;AACpB,YAAI,OAAOA,IAAI,CAACE,GAAD,CAAX,KAAqB,QAAzB,EAAmC;AACjCH,UAAAA,KAAK,CAACC,IAAI,CAACE,GAAD,CAAL,EAAYD,SAAZ,CAAL;AACD,SAFD,CAGA;AACA;AACA;AACA;AACA;AAPA,aAQK,IAAGC,GAAG,IAAE,MAAR,EAAe;AAClBD,UAAAA,SAAS,CAACE,IAAV,CAAeH,IAAI,CAACE,GAAD,CAAJ,GAAY,GAA3B;AACD;AACF;;AACD,aAAOD,SAAP;AACD,KAhBD;;AAkBA,UAAMG,SAAS,GAAG,YAAY;AAC5BV,MAAAA,WAAW,CAACJ,QAAD,CAAX;AACAE,MAAAA,eAAe,CAACF,QAAD,CAAf;AACA,YAAMe,SAAS,GAAGf,QAAQ,CAACgB,GAAT,CAAcC,IAAD,IAAU;AACvC,cAAMN,SAAS,GAAGF,KAAK,CAACQ,IAAD,CAAvB;AACA,eAAO;AAAEN,UAAAA,SAAS,EAAEA,SAAS,CAACO,QAAV;AAAb,SAAP;AACD,OAHiB,CAAlB;AAIAZ,MAAAA,cAAc,CAACS,SAAD,CAAd;AACA,UAAIf,QAAJ,EAAcQ,UAAU,CAAC,KAAD,CAAV;AACf,KATD;;AAWAM,IAAAA,SAAS;AACV,GAhCQ,EAgCN,CAACd,QAAD,CAhCM,CAAT;AAkCAH,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIE,SAAJ,EAAe;AACb,YAAMoB,OAAO,GAAGd,WAAW,CAACW,GAAZ,CAAgB,CAACN,IAAD,EAAOU,KAAP,KAAiB;AAC/C,YAAIV,IAAI,CAACC,SAAL,CAAeU,WAAf,GAA6BC,OAA7B,CAAqCvB,SAAS,CAACsB,WAAV,EAArC,KAAiE,CAArE,EACE,OAAOlB,QAAQ,CAACiB,KAAD,CAAf;AACF,eAAO,IAAP;AACD,OAJe,CAAhB;AAKAlB,MAAAA,eAAe,CACbiB,OAAO,CAACI,MAAR,CAAgBb,IAAD,IAAU;AACvB,YAAIA,IAAJ,EAAU,OAAO,IAAP;AACV,eAAO,KAAP;AACD,OAHD,CADa,CAAf;AAMD,KAZD,MAYOR,eAAe,CAACC,QAAD,CAAf;AACR,GAdQ,EAcN,CAACJ,SAAD,EAAYI,QAAZ,EAAsBE,WAAtB,CAdM,CAAT;AAgBA,SAAO;AAAEJ,IAAAA,YAAF;AAAgBM,IAAAA;AAAhB,GAAP;AACD,CAzDM;;GAAMT,c","sourcesContent":["import { useState, useEffect } from \"react\";\r\n\r\nexport const useTableSearch = ({ searchVal, retrieve }) => {\r\n  const [filteredData, setFilteredData] = useState([]);\r\n  const [origData, setOrigData] = useState([]);\r\n  const [searchIndex, setSearchIndex] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    const crawl = (data, allValues) => {\r\n      if (!allValues) allValues = [];\r\n      for (var key in data) {\r\n        if (typeof data[key] === \"object\") {\r\n          crawl(data[key], allValues);\r\n        } \r\n        // else if (typeof data[key] === \"array\") {\r\n        //   data[key].map((d, i)=>{\r\n        //     crawl(i, allValues)\r\n        //   })\r\n        // }\r\n        else if(key==\"name\"){\r\n          allValues.push(data[key] + \" \");\r\n        } \r\n      }\r\n      return allValues;\r\n    };\r\n\r\n    const fetchData = async () => {\r\n      setOrigData(retrieve);\r\n      setFilteredData(retrieve);\r\n      const searchInd = retrieve.map((item) => {\r\n        const allValues = crawl(item);\r\n        return { allValues: allValues.toString()};\r\n      });\r\n      setSearchIndex(searchInd);\r\n      if (retrieve) setLoading(false);\r\n    };\r\n\r\n    fetchData();\r\n  }, [retrieve]);\r\n\r\n  useEffect(() => {\r\n    if (searchVal) {\r\n      const reqData = searchIndex.map((data, index) => {\r\n        if (data.allValues.toLowerCase().indexOf(searchVal.toLowerCase()) >= 0)\r\n          return origData[index];\r\n        return null;\r\n      });\r\n      setFilteredData(\r\n        reqData.filter((data) => {\r\n          if (data) return true;\r\n          return false;\r\n        })\r\n      );\r\n    } else setFilteredData(origData);\r\n  }, [searchVal, origData, searchIndex]);\r\n\r\n  return { filteredData, loading };\r\n};\r\n"]},"metadata":{},"sourceType":"module"}