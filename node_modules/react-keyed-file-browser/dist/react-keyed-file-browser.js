!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["react-keyed-file-browser"]=t():e["react-keyed-file-browser"]=t()}(window,(function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=7)}([function(e,t){e.exports=require("prop-types")},function(e,t){e.exports=require("react")},function(e,t){e.exports=require("date-fns")},function(e,t){e.exports=require("react-dnd")},function(e,t){e.exports=require("react-dnd-html5-backend")},function(e,t){e.exports=require("classnames")},function(e,t){e.exports=require("lodash/flow")},function(e,t,r){"use strict";r.r(t),r.d(t,"RawFileBrowser",(function(){return Ft})),r.d(t,"BaseFile",(function(){return L})),r.d(t,"BaseFileConnectors",(function(){return M})),r.d(t,"BaseFolder",(function(){return me})),r.d(t,"BaseFolderConnectors",(function(){return fe})),r.d(t,"Headers",(function(){return a})),r.d(t,"FileRenderers",(function(){return l})),r.d(t,"FolderRenderers",(function(){return s})),r.d(t,"Details",(function(){return n})),r.d(t,"Filters",(function(){return o})),r.d(t,"Groupers",(function(){return c})),r.d(t,"Sorters",(function(){return d})),r.d(t,"Icons",(function(){return p})),r.d(t,"Utils",(function(){return i}));var n={};r.r(n),r.d(n,"DefaultDetail",(function(){return v}));var o={};r.r(o),r.d(o,"DefaultFilter",(function(){return C}));var i={};r.r(i),r.d(i,"isFolder",(function(){return S})),r.d(i,"moveFilesAndFolders",(function(){return k}));var a={};r.r(a),r.d(a,"TableHeader",(function(){return z}));var l={};r.r(l),r.d(l,"ListThumbnailFile",(function(){return Z})),r.d(l,"SimpleListThumbnailFile",(function(){return se})),r.d(l,"TableFile",(function(){return de})),r.d(l,"RawListThumbnailFile",(function(){return X})),r.d(l,"RawTableFile",(function(){return ce}));var s={};r.r(s),r.d(s,"ListThumbnailFolder",(function(){return Re})),r.d(s,"TableFolder",(function(){return Se})),r.d(s,"RawListThumbnailFolder",(function(){return Ce})),r.d(s,"RawTableFolder",(function(){return Oe}));var c={};r.r(c),r.d(c,"GroupByFolder",(function(){return ze})),r.d(c,"GroupByModifiedRelative",(function(){return Qe}));var d={};r.r(d),r.d(d,"SortByName",(function(){return tt})),r.d(d,"SortByModified",(function(){return rt}));var p={};r.r(p),r.d(p,"FontAwesome",(function(){return vt}));var h=r(0),u=r.n(h),f=r(1),m=r.n(f),g=r(3),F=r(4),b=Object.defineProperty,w=(e,t,r)=>(((e,t,r)=>{t in e?b(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);class y extends m.a.Component{constructor(){super(...arguments),w(this,"handleCloseClick",e=>{e&&e.preventDefault(),this.props.close()})}render(){let e=this.props.file.key.split("/");return e=e.length?e[e.length-1]:"",m.a.createElement("div",null,m.a.createElement("h2",null,"Item Detail"),m.a.createElement("dl",null,m.a.createElement("dt",null,"Key"),m.a.createElement("dd",null,this.props.file.key),m.a.createElement("dt",null,"Name"),m.a.createElement("dd",null,e)),m.a.createElement("a",{href:"#",onClick:this.handleCloseClick},"Close"))}}w(y,"propTypes",{file:u.a.shape({key:u.a.string.isRequired,name:u.a.string.isRequired,extension:u.a.string.isRequired,url:u.a.string}).isRequired,close:u.a.func});var v=y,D=Object.defineProperty,E=(e,t,r)=>(((e,t,r)=>{t in e?D(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);class P extends m.a.Component{constructor(){super(...arguments),E(this,"handleFilterChange",e=>{const t=e.target.value;this.props.updateFilter(t)})}render(){return m.a.createElement("input",{type:"search",placeholder:"Filter files",value:this.props.value,onChange:this.handleFilterChange})}}E(P,"propTypes",{value:u.a.string.isRequired,updateFilter:u.a.func});var C=P,R=r(5),O=r.n(R);function S(e){return e.key.endsWith("/")}function k(e,t,r){if(!t.didDrop())return;const n=t.getDropResult(),o=[],i=[];e.browserProps.selection.forEach(e=>{"/"===e[e.length-1]?o.push(e):i.push(e)}),e.browserProps.openFolder(n.path),o.forEach(t=>{const r=t,o=r.split("/"),i=o[o.length-2],a=`${n.path}${i}/`;a.substr(0,r.length)!==r&&a!==r&&e.browserProps.moveFolder&&e.browserProps.moveFolder(r,a)}),i.forEach(t=>{const r=t,o=r.split("/"),i=o[o.length-1],a=`${n.path}${i}`;a!==r&&e.browserProps.moveFile&&e.browserProps.moveFile(r,a)})}const N={Archive:["zip","rar","7z"],Audio:["mp3","ogg","wav","aac"],Excel:["xls","xlsx"],Image:["jpg","jpeg","png","bmp"],PDF:["pdf"],PowerPoint:["ppt","pptx"],Text:["txt"],Video:["mp4","flv","avi","wmv","mov"],Word:["doc","docx"],Code:["js"]},j={};for(const[e,t]of Object.entries(N))for(const r of t)j[r]=e;var T=Object.defineProperty,A=(e,t,r)=>(((e,t,r)=>{t in e?T(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);class x extends m.a.Component{constructor(){super(...arguments),A(this,"state",{newName:this.getName()}),A(this,"handleFileClick",e=>{e&&e.preventDefault(),this.props.browserProps.preview({url:this.props.url,name:this.getName(),key:this.props.fileKey,extension:this.getExtension()})}),A(this,"handleItemClick",e=>{e.stopPropagation(),this.props.browserProps.select(this.props.fileKey,"file",e.ctrlKey||e.metaKey,e.shiftKey)}),A(this,"handleItemDoubleClick",e=>{e.stopPropagation(),this.handleFileClick()}),A(this,"handleRenameClick",e=>{this.props.browserProps.renameFile&&this.props.browserProps.beginAction("rename",this.props.fileKey)}),A(this,"handleNewNameChange",e=>{const t=e.target.value;this.setState({newName:t})}),A(this,"handleRenameSubmit",e=>{if(e&&e.preventDefault(),!this.props.browserProps.renameFile)return;const t=this.state.newName.trim();if(0===t.length)return;if(["/","\\"].some(e=>-1!==t.indexOf(e)))return;let r=t;const n=this.props.fileKey.lastIndexOf("/");-1!==n&&(r=`${this.props.fileKey.substr(0,n)}/${t}`),this.props.browserProps.renameFile(this.props.fileKey,r)}),A(this,"handleDeleteClick",e=>{this.props.browserProps.deleteFile&&this.props.browserProps.beginAction("delete",this.props.fileKey)}),A(this,"handleDeleteSubmit",e=>{e.preventDefault(),this.props.browserProps.deleteFile&&this.props.browserProps.deleteFile(this.props.browserProps.actionTargets)}),A(this,"handleCancelEdit",e=>{this.props.browserProps.endAction()})}selectFileNameFromRef(e){if(e){const t=e.value,r=t.lastIndexOf(".");e.setSelectionRange(0,r||t.length),e.focus()}}getName(){let e=this.props.newKey||this.props.fileKey;const t=e.lastIndexOf("/");return-1!==t&&(e=e.substr(t+1)),e}getExtension(){const e=this.props.fileKey.split(".");return e[e.length-1].toLowerCase().trim()}getFileType(){return j[this.getExtension()]||"File"}connectDND(e){const t=this.props.isDragging||this.props.action;return"function"!=typeof this.props.browserProps.moveFile||t||this.props.isRenaming||(e=this.props.connectDragSource(e)),"function"!=typeof this.props.browserProps.createFiles&&"function"!=typeof this.props.browserProps.moveFile&&"function"!=typeof this.props.browserProps.moveFolder||(e=this.props.connectDropTarget(e)),e}}A(x,"propTypes",{fileKey:u.a.string,url:u.a.string,newKey:u.a.string,isRenaming:u.a.bool,connectDragSource:u.a.func,connectDropTarget:u.a.func,isDragging:u.a.bool,action:u.a.string,browserProps:u.a.shape({icons:u.a.object,select:u.a.func,beginAction:u.a.func,endAction:u.a.func,preview:u.a.func,createFiles:u.a.func,moveFile:u.a.func,moveFolder:u.a.func,renameFile:u.a.func,deleteFile:u.a.func})});const M={dragSource:{beginDrag:e=>(e.browserProps.selection.length&&e.browserProps.selection.includes(e.fileKey)||e.browserProps.select(e.fileKey,"file"),{key:e.fileKey}),endDrag(e,t,r){k(e,t)}},dragCollect:function(e,t){return{connectDragPreview:e.dragPreview(),connectDragSource:e.dragSource(),isDragging:t.isDragging()}},targetSource:{drop(e,t){if(t.didDrop())return;const r=e.newKey||e.fileKey,n=r.lastIndexOf("/"),o=-1!==n?r.substr(0,n+1):"",i=t.getItem();return i.files&&e.browserProps.createFiles&&e.browserProps.createFiles(i.files,o),{path:o}}},targetCollect:function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver({shallow:!0})}}};var K,I,B,L=x,_=Object.defineProperty;class q extends m.a.Component{handleHeaderClick(e){this.props.select(this.props.fileKey)}render(){const e=m.a.createElement("tr",{className:O()("folder",{dragover:this.props.isOver,selected:this.props.isSelected})},m.a.createElement("th",null,"File"),m.a.createElement("th",{className:"size"},"Size"),m.a.createElement("th",{className:"modified"},"Last Modified"));return"function"==typeof this.props.browserProps.createFiles||"function"==typeof this.props.browserProps.moveFile||"function"==typeof this.props.browserProps.moveFolder?this.props.connectDropTarget(e):e}}K=q,I="propTypes",B={select:u.a.func,fileKey:u.a.string,connectDropTarget:u.a.func,isOver:u.a.bool,isSelected:u.a.func,browserProps:u.a.shape({createFiles:u.a.func,moveFolder:u.a.func,moveFile:u.a.func})},((e,t,r)=>{t in e?_(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(K,"symbol"!=typeof I?I+"":I,B);var z=Object(g.DropTarget)(["file","folder",F.NativeTypes.FILE],M.targetSource,M.targetCollect)(q),W=r(2),$=r(6),G=r.n($);function H(e){if(e>1024){const t=e/1024;if(t>1024){return function(e,t){if(e=parseFloat(e),isNaN(e))return parseFloat("0").toFixed(t);{const r=Math.pow(10,t);return(e=(Math.round(e*r)/r).toFixed(t)).toString()}}(t/1024,2)+" MB"}return Math.round(t)+" kB"}return e+" B"}var V=Object.defineProperty,Y=Object.getOwnPropertySymbols,U=Object.prototype.hasOwnProperty,J=Object.prototype.propertyIsEnumerable,Q=(e,t,r)=>t in e?V(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;class X extends L{render(){const{thumbnail_url:e,action:t,url:r,isDragging:n,isRenaming:o,isSelected:i,isSelectable:a,isOver:l,isDeleting:s,showName:c,showSize:d,showModified:p,browserProps:h,connectDragPreview:u}=this.props;let f;f=e?m.a.createElement("div",{className:"image",style:{backgroundImage:"url("+e+")"}}):h.icons[this.getFileType()]||h.icons.File;const g=n||t,F=h.confirmDeletionRenderer;let b,w,y;c&&(b=!g&&s&&1===h.selection.length?m.a.createElement(F,{handleDeleteSubmit:this.handleDeleteSubmit,handleFileClick:this.handleFileClick,url:r},this.getName()):!g&&o?m.a.createElement("form",{className:"renaming",onSubmit:this.handleRenameSubmit},m.a.createElement("input",{ref:this.selectFileNameFromRef,type:"text",value:this.state.newName,onChange:this.handleNewNameChange,onBlur:this.handleCancelEdit,autoFocus:!0})):m.a.createElement("a",{href:r,download:"download",onClick:this.handleFileClick},this.getName())),d&&(o||s||(w=m.a.createElement("span",{className:"size"},m.a.createElement("small",null,H(this.props.size))))),p&&(o||s||(y=m.a.createElement("span",{className:"modified"},"Last modified: ",Object(W.formatDistanceToNow)(this.props.modified,{addSuffix:!0}))));let v={};a&&(v={onClick:this.handleItemClick});let D=m.a.createElement("li",((e,t)=>{for(var r in t||(t={}))U.call(t,r)&&Q(e,r,t[r]);if(Y)for(var r of Y(t))J.call(t,r)&&Q(e,r,t[r]);return e})({className:O()("file",{pending:t,dragging:n,dragover:l,selected:i}),onDoubleClick:this.handleItemDoubleClick},v),m.a.createElement("div",{className:"item"},m.a.createElement("span",{className:"thumb"},f),m.a.createElement("span",{className:"name"},b),w,y));return"function"==typeof h.moveFile&&(D=u(D)),this.connectDND(D)}}((e,t,r)=>{Q(e,"symbol"!=typeof t?t+"":t,r)})(X,"defaultProps",{showName:!0,showSize:!0,showModified:!0,isSelectable:!0});var Z=G()(Object(g.DragSource)("file",M.dragSource,M.dragCollect),Object(g.DropTarget)(["file","folder",F.NativeTypes.FILE],M.targetSource,M.targetCollect))(X),ee=Object.defineProperty,te=Object.defineProperties,re=Object.getOwnPropertyDescriptors,ne=Object.getOwnPropertySymbols,oe=Object.prototype.hasOwnProperty,ie=Object.prototype.propertyIsEnumerable,ae=(e,t,r)=>t in e?ee(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;class le extends m.a.Component{render(){return m.a.createElement(Z,((e,t)=>te(e,re(t)))(((e,t)=>{for(var r in t||(t={}))oe.call(t,r)&&ae(e,r,t[r]);if(ne)for(var r of ne(t))ie.call(t,r)&&ae(e,r,t[r]);return e})({},this.props),{showName:!1,showSize:!1,showModified:!1,isSelectable:!1}))}}var se=le;class ce extends L{render(){const{isDragging:e,isDeleting:t,isRenaming:r,isOver:n,isSelected:o,action:i,url:a,browserProps:l,connectDragPreview:s,depth:c,size:d,modified:p}=this.props,h=l.icons[this.getFileType()]||l.icons.File,u=e||i,f=l.confirmDeletionRenderer;let g;g=!u&&t&&1===l.selection.length?m.a.createElement(f,{handleDeleteSubmit:this.handleDeleteSubmit,handleFileClick:this.handleFileClick,url:a},h,this.getName()):!u&&r?m.a.createElement("form",{className:"renaming",onSubmit:this.handleRenameSubmit},h,m.a.createElement("input",{ref:this.selectFileNameFromRef,type:"text",value:this.state.newName,onChange:this.handleNewNameChange,onBlur:this.handleCancelEdit,autoFocus:!0})):m.a.createElement("a",{href:a||"#",download:"download",onClick:this.handleFileClick},h,this.getName());let F=m.a.createElement("div",null,g);"function"==typeof l.moveFile&&(F=s(F));const b=m.a.createElement("tr",{className:O()("file",{pending:i,dragging:e,dragover:n,selected:o}),onClick:this.handleItemClick,onDoubleClick:this.handleItemDoubleClick},m.a.createElement("td",{className:"name"},m.a.createElement("div",{style:{paddingLeft:16*c+"px"}},F)),m.a.createElement("td",{className:"size"},H(d)),m.a.createElement("td",{className:"modified"},void 0===p?"-":Object(W.formatDistanceToNow)(p,{addSuffix:!0})));return this.connectDND(b)}}var de=G()(Object(g.DragSource)("file",M.dragSource,M.dragCollect),Object(g.DropTarget)(["file","folder",F.NativeTypes.FILE],M.targetSource,M.targetCollect))(ce),pe=Object.defineProperty,he=(e,t,r)=>(((e,t,r)=>{t in e?pe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);class ue extends m.a.Component{constructor(){super(...arguments),he(this,"state",{newName:this.props.isDraft?"New folder":this.getName()}),he(this,"handleFolderClick",e=>{e.stopPropagation(),this.props.browserProps.select(this.props.fileKey,"folder",e.ctrlKey||e.metaKey,e.shiftKey)}),he(this,"handleFolderDoubleClick",e=>{e.stopPropagation(),this.toggleFolder()}),he(this,"handleRenameClick",e=>{this.props.browserProps.renameFolder&&this.props.browserProps.beginAction("rename",this.props.fileKey)}),he(this,"handleNewNameChange",e=>{const t=e.target.value;this.setState({newName:t})}),he(this,"handleRenameSubmit",e=>{if(e.preventDefault(),e.stopPropagation(),!this.props.browserProps.renameFolder&&!this.props.isDraft)return;const t=this.state.newName.trim();if(0===t.length)return;if(["/","\\"].some(e=>-1!==t.indexOf(e)))return;let r=this.props.fileKey.substr(0,this.props.fileKey.substr(0,this.props.fileKey.length-1).lastIndexOf("/"));r.length&&(r+="/"),r+=t,r+="/",this.props.isDraft?this.props.browserProps.createFolder(r):this.props.browserProps.renameFolder(this.props.fileKey,r)}),he(this,"handleDeleteClick",e=>{this.props.browserProps.deleteFolder&&this.props.browserProps.beginAction("delete",this.props.fileKey)}),he(this,"handleDeleteSubmit",e=>{e.preventDefault(),e.stopPropagation(),this.props.browserProps.deleteFolder&&this.props.browserProps.deleteFolder(this.props.browserProps.actionTargets)}),he(this,"handleCancelEdit",e=>{this.props.browserProps.endAction()}),he(this,"toggleFolder",()=>{this.props.browserProps.toggleFolder(this.props.fileKey)})}selectFolderNameFromRef(e){if(e){const t=e.value;e.setSelectionRange(0,t.length),e.focus()}}getName(){if(this.props.name)return this.props.name;const e=this.props.fileKey.split("/");return this.props.newName||e[e.length-2]}connectDND(e){const t=this.props.isDragging||this.props.action;return this.props.keyDerived&&("function"!=typeof this.props.browserProps.moveFolder||t||this.props.isRenaming||this.props.isDeleting||(e=this.props.connectDragSource(e)),"function"!=typeof this.props.browserProps.createFiles&&"function"!=typeof this.props.browserProps.moveFolder&&"function"!=typeof this.props.browserProps.moveFile||(e=this.props.connectDropTarget(e))),e}}he(ue,"propTypes",{name:u.a.string,fileKey:u.a.string,newName:u.a.string,keyDerived:u.a.bool,isDraft:u.a.bool,isRenaming:u.a.bool,isDeleting:u.a.bool,connectDragSource:u.a.func,connectDropTarget:u.a.func,isDragging:u.a.bool,action:u.a.string,browserProps:u.a.shape({select:u.a.func,toggleFolder:u.a.func,beginAction:u.a.func,endAction:u.a.func,preview:u.a.func,createFiles:u.a.func,createFolder:u.a.func,moveFile:u.a.func,moveFolder:u.a.func,renameFolder:u.a.func,deleteFolder:u.a.func})});const fe={dragSource:{beginDrag:e=>(e.browserProps.selection.length||e.browserProps.select(e.fileKey,"folder"),{key:e.fileKey}),endDrag(e,t,r){k(e,t)}},dragCollect:function(e,t){return{connectDragPreview:e.dragPreview(),connectDragSource:e.dragSource(),isDragging:t.isDragging()}}};var me=ue,ge=Object.defineProperty,Fe=Object.defineProperties,be=Object.getOwnPropertyDescriptors,we=Object.getOwnPropertySymbols,ye=Object.prototype.hasOwnProperty,ve=Object.prototype.propertyIsEnumerable,De=(e,t,r)=>t in e?ge(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ee=(e,t)=>{for(var r in t||(t={}))ye.call(t,r)&&De(e,r,t[r]);if(we)for(var r of we(t))ve.call(t,r)&&De(e,r,t[r]);return e},Pe=(e,t)=>Fe(e,be(t));class Ce extends me{render(){const{isOpen:e,isDragging:t,isDeleting:r,isRenaming:n,isDraft:o,isOver:i,isSelected:a,url:l,action:s,browserProps:c,depth:d,keyDerived:p,connectDragPreview:h}=this.props,u=c.icons[e?"FolderOpen":"Folder"],f=t||s,g=c.confirmDeletionRenderer;let F,b;if(F=!f&&r&&1===c.selection.length?m.a.createElement(g,{handleDeleteSubmit:this.handleDeleteSubmit,handleFileClick:this.handleFileClick,url:l},this.getName()):!f&&n||o?m.a.createElement("div",null,m.a.createElement("form",{className:"renaming",onSubmit:this.handleRenameSubmit},m.a.createElement("input",{type:"text",ref:this.selectFolderNameFromRef,value:this.state.newName,onChange:this.handleNewNameChange,onBlur:this.handleCancelEdit,autoFocus:!0}))):m.a.createElement("div",null,m.a.createElement("a",{onClick:this.toggleFolder},this.getName())),e&&c.nestChildren){b=[];for(let e=0;e<b.length;e++){const t=b[e],r=Pe(Ee({},c.getItemProps(t,c)),{depth:d+1});S(t)?b.push(m.a.createElement(c.folderRenderer,Ee(Pe(Ee(Ee({},t),r),{browserProps:c}),c.folderRendererProps))):b.push(m.a.createElement(c.fileRenderer,Ee(Pe(Ee(Ee({},t),r),{browserProps:c}),c.fileRendererProps)))}b=b.length?m.a.createElement("ul",{style:{padding:"0 8px",paddingLeft:"16px"}},b):m.a.createElement("p",null,"No items in this folder")}let w=m.a.createElement("li",{className:O()("folder",{expanded:e&&c.nestChildren,pending:s,dragging:t,dragover:i,selected:a}),onClick:this.handleFolderClick,onDoubleClick:this.handleFolderDoubleClick},m.a.createElement("div",{className:"item"},m.a.createElement("span",{className:"thumb"},u),m.a.createElement("span",{className:"name"},F)),b);return"function"==typeof c.moveFolder&&p&&(w=h(w)),this.connectDND(w)}}var Re=G()(Object(g.DragSource)("folder",fe.dragSource,fe.dragCollect),Object(g.DropTarget)(["file","folder",F.NativeTypes.FILE],M.targetSource,M.targetCollect))(Ce);class Oe extends me{render(){const{isOpen:e,isDragging:t,isDeleting:r,isRenaming:n,isDraft:o,isOver:i,isSelected:a,action:l,url:s,browserProps:c,connectDragPreview:d,depth:p}=this.props,h=c.icons[e?"FolderOpen":"Folder"],u=t||l,f=c.confirmDeletionRenderer;let g;g=!u&&r&&1===c.selection.length?m.a.createElement(f,{handleDeleteSubmit:this.handleDeleteSubmit,handleFileClick:this.handleFileClick,url:s},h,this.getName()):!u&&n||o?m.a.createElement("div",null,m.a.createElement("form",{className:"renaming",onSubmit:this.handleRenameSubmit},h,m.a.createElement("input",{type:"text",ref:this.selectFolderNameFromRef,value:this.state.newName,onChange:this.handleNewNameChange,onBlur:this.handleCancelEdit,autoFocus:!0}))):m.a.createElement("div",null,m.a.createElement("a",{onClick:this.toggleFolder},h,this.getName()));let F=m.a.createElement("div",null,g);"function"==typeof c.moveFile&&(F=d(F));const b=m.a.createElement("tr",{className:O()("folder",{pending:l,dragging:t,dragover:i,selected:a}),onClick:this.handleFolderClick,onDoubleClick:this.handleFolderDoubleClick},m.a.createElement("td",{className:"name"},m.a.createElement("div",{style:{paddingLeft:16*p+"px"}},F)),m.a.createElement("td",null),m.a.createElement("td",null));return this.connectDND(b)}}var Se=G()(Object(g.DragSource)("folder",fe.dragSource,fe.dragCollect),Object(g.DropTarget)(["file","folder",F.NativeTypes.FILE],M.targetSource,M.targetCollect))(Oe);const ke=e=>{const{children:t,handleDeleteSubmit:r,handleFileClick:n,url:o}=e;return m.a.createElement("form",{className:"deleting",onSubmit:r},m.a.createElement("a",{href:o,download:"download",onClick:n},t),m.a.createElement("div",null,m.a.createElement("button",{type:"submit"},"Confirm Deletion")))};ke.propTypes={children:u.a.node,handleDeleteSubmit:u.a.func,handleFileClick:u.a.func,url:u.a.string},ke.defaultProps={url:"#"};var Ne=ke;const je=e=>{const{handleDeleteSubmit:t}=e;return m.a.createElement("button",{className:"deleting",onClick:t},"Confirm Deletion")};je.propTypes={handleDeleteSubmit:u.a.func};var Te=je,Ae=Object.defineProperty,xe=Object.defineProperties,Me=Object.getOwnPropertyDescriptors,Ke=Object.getOwnPropertySymbols,Ie=Object.prototype.hasOwnProperty,Be=Object.prototype.propertyIsEnumerable,Le=(e,t,r)=>t in e?Ae(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,_e=(e,t)=>{for(var r in t||(t={}))Ie.call(t,r)&&Le(e,r,t[r]);if(Ke)for(var r of Ke(t))Be.call(t,r)&&Le(e,r,t[r]);return e},qe=(e,t)=>xe(e,Me(t)),ze=function(e,t){const r={contents:[],children:{}};return e.map(e=>{e.relativeKey=(e.newKey||e.key).substr(t.length);let n=r;const o=e.relativeKey.split("/");o.map((t,r)=>{if(r===o.length-1&&S(e))for(const t in e)n[t]=e[t];if(""===t)return;!S(e)&&r===o.length-1?n.contents.push(qe(_e({},e),{keyDerived:!0})):(t in n.children==!1&&(n.children[t]={contents:[],children:{}}),n=n.children[t])})}),e=function e(r,n){""!==n&&(n+="/");let o=[];for(const i in r.children)o.push(qe(_e({},r.children[i]),{contents:void 0,keyDerived:!0,key:t+n+i+"/",relativeKey:n+i+"/",children:e(r.children[i],n+i),size:0}));return o=o.concat(r.contents),o}(r,"")};var We=Object.defineProperty,$e=Object.defineProperties,Ge=Object.getOwnPropertyDescriptors,He=Object.getOwnPropertySymbols,Ve=Object.prototype.hasOwnProperty,Ye=Object.prototype.propertyIsEnumerable,Ue=(e,t,r)=>t in e?We(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Je=(e,t)=>{for(var r in t||(t={}))Ve.call(t,r)&&Ue(e,r,t[r]);if(He)for(var r of He(t))Ye.call(t,r)&&Ue(e,r,t[r]);return e},Qe=function(e,t){const r=function(){const e=[],t=new Date;return e.push({name:"Today",begins:Object(W.startOfToday)(),ends:Object(W.endOfToday)(),items:[]}),e.push({name:"Yesterday",begins:Object(W.startOfYesterday)(),ends:Object(W.endOfYesterday)(),items:[]}),e.push({name:"Earlier this Week",begins:Object(W.startOfWeek)(t),ends:Object(W.endOfWeek)(t),items:[]}),e.push({name:"Last Week",begins:Object(W.startOfWeek)(Object(W.addWeeks)(t,-1)),ends:Object(W.endOfWeek)(Object(W.addWeeks)(t,-1)),items:[]}),Object(W.getMonth)(e[e.length-1].begins)===Object(W.getMonth)(t)&&e.push({name:"Earlier this Month",begins:Object(W.startOfMonth)(t),ends:Object(W.endOfMonth)(t),items:[]}),e}();for(let t=0;t<e.length;t++){const o=e[t];if(S(o))continue;const i=(n=Je({},o),$e(n,Ge({keyDerived:!0})));let a=!1;const l=+i.modified;for(let e=0;e<r.length;e++){const t=r[e];if(l>+t.begins&&l<=+t.ends){t.items.push(i),a=!0;break}}if(!a){const e={name:Object(W.format)(i.modified,"MMMM yyyy"),begins:Object(W.startOfMonth)(i.modified),ends:Object(W.endOfMonth)(i.modified),items:[]};e.items.push(i),r.push(e)}}var n;const o=[];for(let e=0;e<r.length;e++){const t=r[e];t.items.length&&o.push({key:t.name.toLowerCase().replace(" ","_")+"/",name:t.name,children:t.items,size:0})}return o};const Xe=/(-?\d*\.?\d+)/g;function Ze(e,t){const r=String(e.name).split(Xe),n=String(t.name).split(Xe),o=Math.min(r.length,n.length);for(let e=0;e<o;e++){const t=parseFloat(r[e])||r[e].toLowerCase(),o=parseFloat(n[e])||n[e].toLowerCase();if(t<o)return-1;if(t>o)return 1}return 0}function et(e,t){return e.draft&&!t.draft?1:t.draft&&!e.draft?-1:Ze(e,t)}var tt=function(e){return function e(t){let r=[],n=[];for(let e=0;e<t.length;e++){const o=t[e],i=(o.newKey||o.key).split("/");o.children?(o.name||(o.name=i[i.length-2]),r.push(o)):(o.name||(o.name=i[i.length-1]),n.push(o))}n=n.sort(Ze),r=r.sort(et);for(let t=0;t<r.length;t++){const n=r[t];n.children=e(n.children)}let o=[];return o=o.concat(r),o=o.concat(n),o}(e)};var rt=function(e){return function e(t){const r=[];let n=[];for(let e=0;e<t.length;e++){const o=t[e],i=(o.newKey||o.key).split("/");o.children?r.push(o):(o.name=i[i.length-1],n.push(o))}n=n.sort(W.compareAsc);for(let t=0;t<r.length;t++){const n=r[t];n.children=e(n.children)}let o=[];return o=o.concat(r),o=o.concat(n),o}(e)};const nt=e=>{const{selectedItems:t,isFolder:r,icons:n,nameFilter:o,canCreateFolder:i,onCreateFolder:a,canRenameFile:l,onRenameFile:s,canRenameFolder:c,onRenameFolder:d,canDeleteFile:p,onDeleteFile:h,canDeleteFolder:u,onDeleteFolder:f,canDownloadFile:g,onDownloadFile:F,canDownloadFolder:b,onDownloadFolder:w}=e;let y=[];if(t.length){const e=t.filter(e=>e.action);if(e.length===t.length&&1===[...new Set(e)].length){let t;switch(e[0].action){case"delete":t="Deleting ...";break;case"rename":t="Renaming ...";break;default:t="Moving ..."}y=m.a.createElement("div",{className:"item-actions"},n.Loading," ",t)}else{r&&i&&!o&&y.push(m.a.createElement("li",{key:"action-add-folder"},m.a.createElement("a",{onClick:a,href:"#",role:"button"},n.Folder," Add Subfolder")));const e=t.find(e=>!e.keyDerived);e||r||!l||1!==t.length?!e&&r&&c&&y.push(m.a.createElement("li",{key:"action-rename"},m.a.createElement("a",{onClick:d,href:"#",role:"button"},n.Rename," Rename"))):y.push(m.a.createElement("li",{key:"action-rename"},m.a.createElement("a",{onClick:s,href:"#",role:"button"},n.Rename," Rename"))),e||r||!p?!e&&r&&u&&y.push(m.a.createElement("li",{key:"action-delete"},m.a.createElement("a",{onClick:f,href:"#",role:"button"},n.Delete," Delete"))):y.push(m.a.createElement("li",{key:"action-delete"},m.a.createElement("a",{onClick:h,href:"#",role:"button"},n.Delete," Delete"))),(!r&&g||r&&b)&&y.push(m.a.createElement("li",{key:"action-download"},m.a.createElement("a",{onClick:r?w:F,href:"#",role:"button"},n.Download," Download"))),y=y.length?m.a.createElement("ul",{className:"item-actions"},y):m.a.createElement("div",{className:"item-actions"}," ")}}else i&&!o&&y.push(m.a.createElement("li",{key:"action-add-folder"},m.a.createElement("a",{onClick:a,href:"#",role:"button"},n.Folder," Add Folder"))),y=y.length?m.a.createElement("ul",{className:"item-actions"},y):m.a.createElement("div",{className:"item-actions"}," ");return y};nt.propTypes={selectedItems:u.a.arrayOf(u.a.object),isFolder:u.a.bool,icons:u.a.object,nameFilter:u.a.string,canCreateFolder:u.a.bool,onCreateFolder:u.a.func,canRenameFile:u.a.bool,onRenameFile:u.a.func,canRenameFolder:u.a.bool,onRenameFolder:u.a.func,canDeleteFile:u.a.bool,onDeleteFile:u.a.func,canDeleteFolder:u.a.bool,onDeleteFolder:u.a.func,canDownloadFile:u.a.bool,onDownloadFile:u.a.func,canDownloadFolder:u.a.bool,onDownloadFolder:u.a.func},nt.defaultProps={selectedItems:[],isFolder:!1,icons:{},nameFilter:"",canCreateFolder:!1,onCreateFolder:null,canRenameFile:!1,onRenameFile:null,canRenameFolder:!1,onRenameFolder:null,canDeleteFile:!1,onDeleteFile:null,canDeleteFolder:!1,onDeleteFolder:null,canDownloadFile:!1,onDownloadFile:null,canDownloadFolder:!1,onDownloadFolder:null};var ot=nt,it=Object.defineProperty,at=Object.defineProperties,lt=Object.getOwnPropertyDescriptors,st=Object.getOwnPropertySymbols,ct=Object.prototype.hasOwnProperty,dt=Object.prototype.propertyIsEnumerable,pt=(e,t,r)=>t in e?it(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ht=(e,t)=>{for(var r in t||(t={}))ct.call(t,r)&&pt(e,r,t[r]);if(st)for(var r of st(t))dt.call(t,r)&&pt(e,r,t[r]);return e},ut=(e,t)=>at(e,lt(t)),ft=(e,t,r)=>(pt(e,"symbol"!=typeof t?t+"":t,r),r);const mt=/.*\/__new__[/]?$/gm;function gt(e,t){return{key:"file-"+e.key,fileKey:e.key,isSelected:t.selection.includes(e.key),isOpen:e.key in t.openFolders||t.nameFilter,isRenaming:"rename"===t.activeAction&&t.actionTargets.includes(e.key),isDeleting:"delete"===t.activeAction&&t.actionTargets.includes(e.key),isDraft:!!e.draft}}class Ft extends m.a.Component{constructor(){super(...arguments),ft(this,"state",{openFolders:{},selection:[],activeAction:null,actionTargets:[],nameFilter:"",searchResultsShown:20,previewFile:null,addFolder:null}),ft(this,"getFile",e=>{let t=!1;const r=this.props.files.find(r=>(r.key.startsWith(e)&&(t=!0),r.key===e));return r||(t?{key:e,modified:0,size:0,relativeKey:e}:void 0)}),ft(this,"createFiles",(e,t)=>{this.setState(e=>{const r={selection:[]};return t&&(r.openFolders=ut(ht({},e.openFolders),{[t]:!0})),r},()=>{this.props.onCreateFiles(e,t)})}),ft(this,"createFolder",e=>{this.setState({activeAction:null,actionTargets:[],selection:[e]},()=>{this.props.onCreateFolder(e)})}),ft(this,"moveFile",(e,t)=>{this.setState({activeAction:null,actionTargets:[],selection:[t]},()=>{this.props.onMoveFile(e,t)})}),ft(this,"moveFolder",(e,t)=>{this.setState(r=>{const n={activeAction:null,actionTargets:[],selection:[t]};return e in r.openFolders&&(n.openFolders=ut(ht({},r.openFolders),{[t]:!0})),n},()=>{this.props.onMoveFolder(e,t)})}),ft(this,"renameFile",(e,t)=>{this.setState({activeAction:null,actionTargets:[],selection:[t]},()=>{this.props.onRenameFile(e,t)})}),ft(this,"renameFolder",(e,t)=>{this.setState(r=>{const n={activeAction:null,actionTargets:[]};return r.selection[0].substr(0,e.length)===e&&(n.selection=[r.selection[0].replace(e,t)]),e in r.openFolders&&(n.openFolders=ut(ht({},r.openFolders),{[t]:!0})),n},()=>{this.props.onRenameFolder(e,t)})}),ft(this,"deleteFile",e=>{this.setState({activeAction:null,actionTargets:[],selection:[]},()=>{this.props.onDeleteFile(e)})}),ft(this,"deleteFolder",e=>{this.setState(t=>{const r={activeAction:null,actionTargets:[],selection:[]};return e in t.openFolders&&(r.openFolders=ht({},t.openFolders),delete r.openFolders[e]),r},()=>{this.props.onDeleteFolder(e)})}),ft(this,"downloadFile",e=>{this.setState({activeAction:null,actionTargets:[]},()=>{this.props.onDownloadFile(e)})}),ft(this,"downloadFolder",e=>{this.setState({activeAction:null,actionTargets:[]},()=>{this.props.onDownloadFolder(e)})}),ft(this,"beginAction",(e,t)=>{this.setState({activeAction:e,actionTargets:t||[]})}),ft(this,"endAction",()=>{this.state.selection&&this.state.selection.length>0&&this.state.selection.filter(e=>e.match(mt)).length>0&&this.setState({selection:[]}),this.beginAction(null,null)}),ft(this,"select",(e,t,r,n)=>{const{actionTargets:o}=this.state,i=o.length&&!o.includes(e),a=this.getFile(e);let l=[e];if(r||n){const t=this.state.selection.indexOf(e);l=-1!==t?[...this.state.selection.slice(0,t),...this.state.selection.slice(t+1)]:[...this.state.selection,e]}this.setState(e=>({selection:l,actionTargets:i?[]:o,activeAction:i?null:e.activeAction}),()=>{this.props.onSelect(a),"file"===t&&this.props.onSelectFile(a),"folder"===t&&this.props.onSelectFolder(a)})}),ft(this,"preview",e=>{this.state.previewFile&&this.state.previewFile.key!==e.key&&this.closeDetail(),this.setState({previewFile:e},()=>{this.props.onPreviewOpen(e)})}),ft(this,"closeDetail",()=>{this.setState({previewFile:null},()=>{this.props.onPreviewClose(this.state.previewFile)})}),ft(this,"handleShowMoreClick",e=>{e.preventDefault(),this.setState(e=>({searchResultsShown:e.searchResultsShown+20}))}),ft(this,"toggleFolder",e=>{const t=e in this.state.openFolders;this.setState(r=>{const n={openFolders:ht({},r.openFolders)};return t?delete n.openFolders[e]:n.openFolders[e]=!0,n},()=>{const r=t?"onFolderClose":"onFolderOpen";this.props[r](this.getFile(e),this.getBrowserProps())})}),ft(this,"openFolder",e=>{this.setState(t=>({openFolders:ut(ht({},t.openFolders),{[e]:!0})}),()=>{this.props.onFolderOpen(this.getFile(e),this.getBrowserProps())})}),ft(this,"handleGlobalClick",e=>{!(!this.browserRef||!this.browserRef.contains(e.target))||this.setState({selection:[],actionTargets:[],activeAction:null})}),ft(this,"handleActionBarRenameClick",e=>{e.preventDefault(),this.beginAction("rename",this.state.selection)}),ft(this,"handleActionBarDeleteClick",e=>{e.preventDefault(),this.beginAction("delete",this.state.selection)}),ft(this,"handleActionBarAddFolderClick",e=>{e.preventDefault(),"createFolder"!==this.state.activeAction&&this.setState(e=>{let t="";e.selection&&e.selection.length>0&&(t+=e.selection,"/"!==t.substr(t.length-1,t.length)&&(t+="/")),"__new__/"===t||t.endsWith("/__new__/")||(t+="__new__/");const r={actionTargets:[t],activeAction:"createFolder",selection:[t]};return e.selection&&e.selection.length>0&&(r.openFolders=ut(ht({},e.openFolders),{[this.state.selection]:!0})),r})}),ft(this,"handleActionBarDownloadClick",e=>{e.preventDefault();const t=this.getFiles(),r=this.getSelectedItems(t);1===r.length&&S(r[0])?this.downloadFolder(this.state.selection):this.downloadFile(this.state.selection)}),ft(this,"updateFilter",e=>{this.setState({nameFilter:e,searchResultsShown:20})}),ft(this,"handleMultipleDeleteSubmit",()=>{console.log(this),this.deleteFolder(this.state.selection.filter(e=>"/"===e[e.length-1])),this.deleteFile(this.state.selection.filter(e=>"/"!==e[e.length-1]))})}componentDidMount(){"table"===this.props.renderStyle&&this.props.nestChildren&&console.warn("Invalid settings: Cannot nest table children in file browser"),window.addEventListener("click",this.handleGlobalClick)}componentWillUnmount(){window.removeEventListener("click",this.handleGlobalClick)}getBrowserProps(){return{nestChildren:this.props.nestChildren,fileRenderer:this.props.fileRenderer,fileRendererProps:this.props.fileRendererProps,folderRenderer:this.props.folderRenderer,folderRendererProps:this.props.folderRendererProps,confirmDeletionRenderer:this.props.confirmDeletionRenderer,confirmMultipleDeletionRenderer:this.props.confirmMultipleDeletionRenderer,icons:this.props.icons,openFolders:this.state.openFolders,nameFilter:this.state.nameFilter,selection:this.state.selection,activeAction:this.state.activeAction,actionTargets:this.state.actionTargets,select:this.select,openFolder:this.openFolder,toggleFolder:this.toggleFolder,beginAction:this.beginAction,endAction:this.endAction,preview:this.preview,createFiles:this.props.onCreateFiles?this.createFiles:void 0,createFolder:this.props.onCreateFolder?this.createFolder:void 0,renameFile:this.props.onRenameFile?this.renameFile:void 0,renameFolder:this.props.onRenameFolder?this.renameFolder:void 0,moveFile:this.props.onMoveFile?this.moveFile:void 0,moveFolder:this.props.onMoveFolder?this.moveFolder:void 0,deleteFile:this.props.onDeleteFile?this.deleteFile:void 0,deleteFolder:this.props.onDeleteFolder?this.deleteFolder:void 0,getItemProps:gt}}renderActionBar(e){const{icons:t,canFilter:r,filterRendererProps:n,filterRenderer:o,actionRenderer:i,onCreateFolder:a,onRenameFile:l,onRenameFolder:s,onDeleteFile:c,onDeleteFolder:d,onDownloadFile:p,onDownloadFolder:h}=this.props,u=this.getBrowserProps(),f=1===e.length&&S(e[0]);let g;r&&(g=m.a.createElement(o,ht({value:this.state.nameFilter,updateFilter:this.updateFilter},n)));const F=m.a.createElement(i,{browserProps:u,selectedItems:e,isFolder:f,icons:t,nameFilter:this.state.nameFilter,canCreateFolder:"function"==typeof a,onCreateFolder:this.handleActionBarAddFolderClick,canRenameFile:"function"==typeof l,onRenameFile:this.handleActionBarRenameClick,canRenameFolder:"function"==typeof s,onRenameFolder:this.handleActionBarRenameClick,canDeleteFile:"function"==typeof c,onDeleteFile:this.handleActionBarDeleteClick,canDeleteFolder:"function"==typeof d,onDeleteFolder:this.handleActionBarDeleteClick,canDownloadFile:"function"==typeof p,onDownloadFile:this.handleActionBarDownloadClick,canDownloadFolder:"function"==typeof h,onDownloadFolder:this.handleActionBarDownloadClick});return m.a.createElement("div",{className:"action-bar"},g,F)}renderFiles(e,t){const{fileRenderer:r,fileRendererProps:n,folderRenderer:o,folderRendererProps:i}=this.props,a=this.getBrowserProps();let l=[];return e.map(e=>{const s=ut(ht({},a.getItemProps(e,a)),{depth:this.state.nameFilter?0:t});S(e)?(!this.props.showFoldersOnFilter&&this.state.nameFilter||l.push(m.a.createElement(o,ht(ut(ht(ht({},e),s),{browserProps:a}),i))),(this.state.nameFilter||s.isOpen&&!a.nestChildren)&&(l=l.concat(this.renderFiles(e.children,t+1)))):l.push(m.a.createElement(r,ht(ut(ht(ht({},e),s),{browserProps:a}),n)))}),l}getFiles(){let e=this.props.files.concat([]);if("createFolder"===this.state.activeAction&&e.push({key:this.state.actionTargets[0],size:0,draft:!0}),this.state.nameFilter){const t=[],r=this.state.nameFilter.toLowerCase().split(" ");e.map(e=>{let n=!1;r.map(t=>{-1===e.key.toLowerCase().trim().indexOf(t)&&(n=!0)}),n||t.push(e)}),e=t}if("function"==typeof this.props.group)e=this.props.group(e,"");else{const t=[];e.map(e=>{S(e)||t.push(e)}),e=t}return"function"==typeof this.props.sort&&(e=this.props.sort(e)),e}getSelectedItems(e){const{selection:t}=this.state,r=[],n=e=>{t.includes(e.key)&&r.push(e),e.children&&e.children.map(n)};return e.map(n),r}render(){const e={browserProps:this.getBrowserProps(),fileKey:"",fileCount:this.props.files.length};let t;const r=this.getFiles(),n=this.getSelectedItems(r);let o,i=this.renderFiles(r,0);switch(this.props.renderStyle){case"table":if(i.length){if(this.state.nameFilter){const e=i.length;i=i.slice(0,this.state.searchResultsShown),e>i.length&&i.push(m.a.createElement("tr",{key:"show-more"},m.a.createElement("td",{colSpan:100},m.a.createElement("a",{onClick:this.handleShowMoreClick,href:"#"},this.props.showMoreResults))))}}else i=this.state.nameFilter?m.a.createElement("tr",null,m.a.createElement("td",{colSpan:100},this.props.noMatchingFilesMessage(this.state.nameFilter))):m.a.createElement("tr",null,m.a.createElement("td",{colSpan:100},this.props.noFilesMessage));this.props.headerRenderer&&(o=m.a.createElement("thead",null,m.a.createElement(this.props.headerRenderer,ht(ht({},e),this.props.headerRendererProps)))),t=m.a.createElement("table",{cellSpacing:"0",cellPadding:"0"},o,m.a.createElement("tbody",null,i));break;case"list":if(i.length){let e;if(this.state.nameFilter){const t=i.length;i=i.slice(0,this.state.searchResultsShown),t>i.length&&(e=m.a.createElement("a",{onClick:this.handleShowMoreClick,href:"#"},this.props.showMoreResults))}i=m.a.createElement("div",null,m.a.createElement("ul",null,i),e)}else i=this.state.nameFilter?m.a.createElement("p",{className:"empty"},this.props.noMatchingFilesMessage(this.state.nameFilter)):m.a.createElement("p",{className:"empty"},this.props.noFilesMessage);this.props.headerRenderer&&(o=m.a.createElement(this.props.headerRenderer,ht(ht({},e),this.props.headerRendererProps))),t=m.a.createElement("div",null,o,i)}const a=this.props.confirmMultipleDeletionRenderer;return m.a.createElement("div",{className:"rendered-react-keyed-file-browser"},this.props.actions,m.a.createElement("div",{className:"rendered-file-browser",ref:e=>{this.browserRef=e}},this.props.showActionBar&&this.renderActionBar(n),"delete"===this.state.activeAction&&this.state.selection.length>1&&m.a.createElement(a,{handleDeleteSubmit:this.handleMultipleDeleteSubmit}),m.a.createElement("div",{className:"files"},t)),null!==this.state.previewFile&&m.a.createElement(this.props.detailRenderer,ht({file:this.state.previewFile,close:this.closeDetail},this.props.detailRendererProps)))}}ft(Ft,"propTypes",{files:u.a.arrayOf(u.a.shape({key:u.a.string.isRequired,modified:u.a.number,size:u.a.number})).isRequired,actions:u.a.node,showActionBar:u.a.bool.isRequired,canFilter:u.a.bool.isRequired,showFoldersOnFilter:u.a.bool,noFilesMessage:u.a.oneOfType([u.a.string,u.a.object]),noMatchingFilesMessage:u.a.func,showMoreResults:u.a.oneOfType([u.a.string,u.a.object]),group:u.a.func.isRequired,sort:u.a.func.isRequired,icons:u.a.shape({Folder:u.a.element,FolderOpen:u.a.element,File:u.a.element,PDF:u.a.element,Image:u.a.element,Delete:u.a.element,Rename:u.a.element,Loading:u.a.element,Download:u.a.element}),nestChildren:u.a.bool.isRequired,renderStyle:u.a.oneOf(["list","table"]).isRequired,startOpen:u.a.bool.isRequired,headerRenderer:u.a.func,headerRendererProps:u.a.object,filterRenderer:u.a.func,filterRendererProps:u.a.object,fileRenderer:u.a.func,fileRendererProps:u.a.object,folderRenderer:u.a.func,folderRendererProps:u.a.object,detailRenderer:u.a.func,detailRendererProps:u.a.object,actionRenderer:u.a.func,confirmDeletionRenderer:u.a.func,confirmMultipleDeletionRenderer:u.a.func,onCreateFiles:u.a.oneOfType([u.a.func,u.a.bool]),onCreateFolder:u.a.oneOfType([u.a.func,u.a.bool]),onMoveFile:u.a.oneOfType([u.a.func,u.a.bool]),onMoveFolder:u.a.oneOfType([u.a.func,u.a.bool]),onRenameFile:u.a.oneOfType([u.a.func,u.a.bool]),onRenameFolder:u.a.oneOfType([u.a.func,u.a.bool]),onDeleteFile:u.a.oneOfType([u.a.func,u.a.bool]),onDeleteFolder:u.a.oneOfType([u.a.func,u.a.bool]),onDownloadFile:u.a.oneOfType([u.a.func,u.a.bool]),onDownloadFolder:u.a.oneOfType([u.a.func,u.a.bool]),onSelect:u.a.func,onSelectFile:u.a.func,onSelectFolder:u.a.func,onPreviewOpen:u.a.func,onPreviewClose:u.a.func,onFolderOpen:u.a.func,onFolderClose:u.a.func}),ft(Ft,"defaultProps",{showActionBar:!0,canFilter:!0,showFoldersOnFilter:!1,noFilesMessage:"No files.",noMatchingFilesMessage:e=>`No files matching "${e}".`,showMoreResults:"Show more results",group:ze,sort:tt,nestChildren:!1,renderStyle:"table",startOpen:!1,headerRenderer:z,headerRendererProps:{},filterRenderer:C,filterRendererProps:{},fileRenderer:de,fileRendererProps:{},folderRenderer:Se,folderRendererProps:{},detailRenderer:v,detailRendererProps:{},actionRenderer:ot,confirmDeletionRenderer:Ne,confirmMultipleDeletionRenderer:Te,icons:{},onSelect:e=>{},onSelectFile:e=>{},onSelectFolder:e=>{},onPreviewOpen:e=>{},onPreviewClose:e=>{},onFolderOpen:e=>{},onFolderClose:e=>{}});class bt extends f.Component{render(){return m.a.createElement(g.DndProvider,{backend:F.HTML5Backend},m.a.createElement(Ft,ht({},this.props)))}}var wt=bt;const yt=e=>{const t=4===e?"fa":"fas",r=4===e?["FontAwesome",'"FontAwesome"']:['"Font Awesome 5 Free"','"Font Awesome 5 Pro"'];let n=!1;const o=document.createElement("span");o.className=t,o.style.display="none",document.body.insertBefore(o,document.body.firstChild);var i,a;return r.includes((i=o,a="font-family",window.getComputedStyle(i,null).getPropertyValue(a)))?n=!0:console.warn(`Font Awesome ${e} was not detected but Font Awesome ${e} icons have been requested for \`react-object-list\``),document.body.removeChild(o),n};var vt=(e=4)=>{switch(e){case 4:return yt(4),{File:m.a.createElement("i",{className:"fa fa-file-o","aria-hidden":"true"}),Image:m.a.createElement("i",{className:"fa fa-file-image-o","aria-hidden":"true"}),Video:m.a.createElement("i",{className:"fa fa-file-video-o","aria-hidden":"true"}),Audio:m.a.createElement("i",{className:"fa fa-file-audio-o","aria-hidden":"true"}),Archive:m.a.createElement("i",{className:"fa fa-file-archive-o","aria-hidden":"true"}),Word:m.a.createElement("i",{className:"fa fa-file-word-o","aria-hidden":"true"}),Excel:m.a.createElement("i",{className:"fa fa-file-excel-o","aria-hidden":"true"}),PowerPoint:m.a.createElement("i",{className:"fa fa-file-powerpoint-o","aria-hidden":"true"}),Text:m.a.createElement("i",{className:"fa fa-file-text-o","aria-hidden":"true"}),PDF:m.a.createElement("i",{className:"fa fa-file-pdf-o","aria-hidden":"true"}),Rename:m.a.createElement("i",{className:"fa fa-i-cursor","aria-hidden":"true"}),Folder:m.a.createElement("i",{className:"fa fa-folder-o","aria-hidden":"true"}),FolderOpen:m.a.createElement("i",{className:"fa fa-folder-open-o","aria-hidden":"true"}),Delete:m.a.createElement("i",{className:"fa fa-trash-o","aria-hidden":"true"}),Loading:m.a.createElement("i",{className:"fa fa-circle-o-notch fa-spin","aria-hidden":"true"}),Download:m.a.createElement("i",{className:"fa fa-download","aria-hidden":"true"})};case 5:return yt(5),{File:m.a.createElement("i",{className:"far fa-file","aria-hidden":"true"}),Image:m.a.createElement("i",{className:"far fa-file-image","aria-hidden":"true"}),Video:m.a.createElement("i",{className:"far fa-file-video","aria-hidden":"true"}),Audio:m.a.createElement("i",{className:"far fa-file-audio","aria-hidden":"true"}),Archive:m.a.createElement("i",{className:"far fa-file-archive","aria-hidden":"true"}),Word:m.a.createElement("i",{className:"far fa-file-word","aria-hidden":"true"}),Excel:m.a.createElement("i",{className:"far fa-file-excel","aria-hidden":"true"}),PowerPoint:m.a.createElement("i",{className:"far fa-file-powerpoint","aria-hidden":"true"}),Text:m.a.createElement("i",{className:"far fa-file-alt","aria-hidden":"true"}),PDF:m.a.createElement("i",{className:"far fa-file-pdf","aria-hidden":"true"}),Rename:m.a.createElement("i",{className:"fas fa-i-cursor","aria-hidden":"true"}),Folder:m.a.createElement("i",{className:"far fa-folder","aria-hidden":"true"}),FolderOpen:m.a.createElement("i",{className:"far fa-folder-open","aria-hidden":"true"}),Delete:m.a.createElement("i",{className:"far fa-trash-alt","aria-hidden":"true"}),Loading:m.a.createElement("i",{className:"fas fa-circle-notch fa-spin","aria-hidden":"true"}),Download:m.a.createElement("i",{className:"fas fa-download","aria-hidden":"true"})};default:console.warn("Could not find config for version "+e,"Accepted versions are: 4, 5","Please make an issue in `react-object-list` to fix this.")}};t.default=wt}])}));